<!DOCTYPE HTML>
<html><head><meta charset="UTF-8"><title>Combinators</title><script type="text/javascript" src="elm-runtime.js"></script><script type="text/javascript">Elm.Main = Elm.Main || {};
Elm.Main.make = function (_elm) {
   "use strict";
   _elm.Main = _elm.Main || {};
   if (_elm.Main.values)
   return _elm.Main.values;
   var _op = {},
   _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Main",
   $Graphics$Element = Elm.Graphics.Element.make(_elm),
   $Signal = Elm.Signal.make(_elm),
   $Text = Elm.Text.make(_elm),
   $Website$Blog$Skeleton = Elm.Website.Blog.Skeleton.make(_elm),
   $Window = Elm.Window.make(_elm);
   var post = $Text.markdown("<div style=\"height:0;width:0;\">&nbsp;</div><p>\n<h2>It&#39;s When You Put A Thing In A Thing And It&#39;s A Thing</h2>\n<p>A combinator is any function that lends itself well to, obviously, combinations. They&#39;re functions that you can chain together to make larger, more important functions do heavy lifting. But one of the coolest things about them is that you only need 3 to write any function at all. To prove it to you, I&#39;ll define them and use them to build the rest of the <a href=\"https://github.com/typelift/Basis/blob/master/Basis/Combinator.swift\">combinators in the Basis</a>.</p>\n<h2>Idiots, I&#39;m Surrounded By Idiots</h2>\n<p>This first combinator is called I, id, identity, or (my favorite) the <a href=\"http://www.angelfire.com/tx4/cus/combinator/birds.html\">Idiot Bird</a>. It is the combinator that returns any argument that is given to it completely unevaluated. Its definition is trivial:</p>\n<pre class=\"sourceCode\"><code class=\"sourceCode\">func idiot&lt;A&gt;(x : A) -&gt; A {\n    return x\n}</code></pre>\n<h2>Vanity Faire</h2>\n<p>This combinator is called the K, const, constant, or Kestral Combinator. It takes two arguments, completely ignores the second, and returns the first always. That&#39;s why it&#39;s called constant: no matter what you give it as a second argument you&#39;ll always get back the first argument. Its definition is less trivial than the Idiot Bird, but it is still quite simple:</p>\n<pre class=\"sourceCode\"><code class=\"sourceCode\">func kestral&lt;A, B&gt;(a : A) -&gt; B -&gt; A {\n    return { _ in a }\n}</code></pre>\n<h2>Birds of a Feather</h2>\n<p>The final combinator is called the S, or Starling combinator. Serendipitously, it is also the definition of <a href=\"http://hackage.haskell.org/package/base-4.7.0.1/docs/Prelude.html#v:fmap\">fmap</a> for functions, but we&#39;ll get into that later. It is complex at first glance, but what it does is quite simple. It takes two functions, f and g, and a single argument compatible with the first part of both of them. It then procedes to apply the function g to its argument, then apply the argument and the new g&#39;d argument to f to give a result. It&#39;s much easier to see it in code than in english, so:</p>\n<pre class=\"sourceCode\"><code class=\"sourceCode\">func starling&lt;A, B, C&gt;(f : (A -&gt; B -&gt; C)) -&gt; (A -&gt; B) -&gt; A -&gt; C {\n    return { g in { x in f(x)(g(x)) } }\n}</code></pre>\n<h2>The Fun Begins</h2>\n<p>The first combinator we&#39;re going to build with our new gang of 3 is... id. Yes, the Idiot Bird combinator, as it turns out, need not be a part of our gang because it can be defined using Starlings and Kestrals.</p>\n<pre class=\"sourceCode\"><code class=\"sourceCode\">func idiot&lt;A&gt;(a : A) -&gt; A {\n    return starling(kestrel)(kestrel(a))(a)\n}</code></pre>\n<p>But we will leave it in for convenience&#39;s sake.</p>\n<p>The first real combinator is function composition, or the bluebird combinator. In most functional languages, this is the <code>(.)</code> combinator that allows you to pipe functions together. It comes in handy later, so we&#39;ll be using it to hide a lot of the complexity of later definitions.</p>\n<pre class=\"sourceCode\"><code class=\"sourceCode\">func bluebird&lt;A, B, C&gt;(f : (B -&gt; C)) -&gt; (A -&gt; B) -&gt; A -&gt; C {\n    return starling(kestrel(starling))(kestrel)(f)\n}</code></pre>\n<p>The next combinator in line is <code>&lt;|</code>, or the backwards application operator. In combinator-ese, this is known as Idiot Bird*, or an Idiot Bird that has been <a href=\"http://mlton.org/EtaExpansion\">eta expanded</a>. Who knew just giving a function an argument and getting a result could be so complicated?</p>\n<pre class=\"sourceCode\"><code class=\"sourceCode\">func idiotstar&lt;A, B&gt;(f: A -&gt; B) -&gt; A -&gt; B {\n    return cardinal(bluebird(bluebird)(idiot))(idiot)(f)\n}</code></pre>\n<p>Here we also define its cousin, the Trush, which does the same thing but with its arguments flipped.</p>\n<pre class=\"sourceCode\"><code class=\"sourceCode\">func thrush&lt;A, B&gt;(x : A) -&gt; (A -&gt; B) -&gt; B {\n    return cardinal(idiot)(x)\n}</code></pre>\n<p>Speaking of flipping arguments to functions, how about we define a bird that does that?</p>\n<pre class=\"sourceCode\"><code class=\"sourceCode\">func cardinal&lt;A, B, C&gt;(f : (A -&gt; B -&gt; C)) -&gt; B -&gt; A -&gt; C {\n    return starling(bluebird(bluebird)(starling))(kestrel(kestrel))(f)\n}</code></pre>\n<p>One that curiously doesn&#39;t have a bird name is the Psi-combinator, which Haskell calls <a href=\"http://hackage.haskell.org/package/base-4.7.0.1/docs/Data-Function.html#v:on\">on</a>. In order to define it we will need the Dovekie combinator, which is a bunch of bluebirds fed to each other, and a cousin of the cardinal:</p>\n<pre class=\"sourceCode\"><code class=\"sourceCode\">func dovekie&lt;A, B, C, D, E&gt;(f : (C -&gt; D -&gt; E)) -&gt; (A -&gt; C) -&gt; A -&gt; (B -&gt; D) -&gt; B -&gt; E {\n    return bluebird(bluebird)(bluebird(bluebird))(f)\n}</code></pre>\n<pre class=\"sourceCode\"><code class=\"sourceCode\">func cardinalstar&lt;A, B, C, D&gt;(f : (A -&gt; C -&gt; B -&gt; D)) -&gt; A -&gt; B -&gt; C -&gt; D {\n    return bluebird(cardinal)(f)\n}</code></pre>\n<pre class=\"sourceCode\"><code class=\"sourceCode\">func psi&lt;A, B, C&gt;(f : (B -&gt; B -&gt; C)) -&gt; (A -&gt; B) -&gt; A -&gt; A -&gt; C {\n    return cardinal(bluebird(starling)(bluebird(cardinalstar)(dovekie)))(idiotstar)(f)\n}</code></pre>\n<p>There&#39;s a veritable <a href=\"https://gist.github.com/CodaFi/10afdd77e42bb8ad18ab\">Aviary of Birds</a> that can be written in terms of the S and K combinators. In fact, S and K are so important that every single combinator you or I or anyone else can ever write can be defined in terms of them. Every function ever written has just been S&#39;s and K&#39;s hidden by syntax and abstractions we all take for granted.</p>\n<p>That&#39;s what makes combinators so powerful. They&#39;re neat little atomic units of computation that can be strung together with ease. As we&#39;ve shown here today, all it takes it just a little creativity and some function application and you can do anything. After all, that&#39;s one of the underlying principles behind declarative programming: we can build bigger better things vertically rather than horizontally. Let your types worry about the plumbing and start throwing birds around until something works!</p>\n</p>\n<div style=\"height:0;width:0;\">&nbsp;</div>",
   "5:8");
   var main = A4($Signal.lift3,
   $Website$Blog$Skeleton.generatePost,
   $Window.dimensions,
   $Signal.constant("Combinators"),
   $Signal.constant(post));
   _elm.Main.values = {_op: _op
                      ,post: post
                      ,main: main};
   return _elm.Main.values;
};Elm.Website = Elm.Website || {};
Elm.Website.Blog = Elm.Website.Blog || {};
Elm.Website.Blog.Skeleton = Elm.Website.Blog.Skeleton || {};
Elm.Website.Blog.Skeleton.make = function (_elm) {
   "use strict";
   _elm.Website = _elm.Website || {};
   _elm.Website.Blog = _elm.Website.Blog || {};
   _elm.Website.Blog.Skeleton = _elm.Website.Blog.Skeleton || {};
   if (_elm.Website.Blog.Skeleton.values)
   return _elm.Website.Blog.Skeleton.values;
   var _op = {},
   _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Website.Blog.Skeleton",
   $Basics = Elm.Basics.make(_elm),
   $Color = Elm.Color.make(_elm),
   $Graphics$Element = Elm.Graphics.Element.make(_elm),
   $Website$Blog$Formatting = Elm.Website.Blog.Formatting.make(_elm);
   var titlebar = F2(function (w,
   t) {
      return $Graphics$Element.color(A3($Color.rgb,
      57,
      74,
      85))(A4($Graphics$Element.container,
      A2($Basics.max,500,w),
      60,
      A2($Graphics$Element.midLeftAt,
      $Graphics$Element.absolute(10),
      $Graphics$Element.absolute(30)),
      t));
   });
   var generatePost = F3(function (_v0,
   t,
   postBody) {
      return function () {
         switch (_v0.ctor)
         {case "_Tuple2":
            return function () {
                 var titleHeight = $Graphics$Element.heightOf($Website$Blog$Formatting.formatTitleText(t));
                 var bodyHeight = $Graphics$Element.heightOf(A2($Graphics$Element.width,
                 500,
                 postBody));
                 return A2($Graphics$Element.flow,
                 $Graphics$Element.down,
                 _L.fromArray([titlebar(_v0._0)($Website$Blog$Formatting.title("  CF"))
                              ,A2($Graphics$Element.spacer,
                              A2($Basics.max,300,_v0._0),
                              100)
                              ,$Graphics$Element.height(160)(A4($Graphics$Element.container,
                              _v0._0,
                              titleHeight,
                              $Graphics$Element.midTop,
                              $Website$Blog$Formatting.formatTitleText(t)))
                              ,A4($Graphics$Element.container,
                              _v0._0,
                              bodyHeight,
                              $Graphics$Element.midTop,
                              A2($Graphics$Element.width,
                              A2($Basics.min,550,_v0._0),
                              postBody))
                              ,A2($Graphics$Element.spacer,
                              A2($Basics.max,300,_v0._0),
                              30)]));
              }();}
         _E.Case($moduleName,
         "between lines 11 and 18");
      }();
   });
   var generateImagefulPost = F4(function (_v4,
   t,
   im,
   postBody) {
      return function () {
         switch (_v4.ctor)
         {case "_Tuple2":
            return function () {
                 var titleHeight = $Graphics$Element.heightOf($Website$Blog$Formatting.formatTitleText(t));
                 var bodyHeight = $Graphics$Element.heightOf(A2($Graphics$Element.width,
                 500,
                 postBody));
                 return A2($Graphics$Element.flow,
                 $Graphics$Element.down,
                 _L.fromArray([A2(titlebar,
                              _v4._0,
                              A3($Website$Blog$Formatting.formatImagefulTitle,
                              {ctor: "_Tuple2"
                              ,_0: _v4._0
                              ,_1: 60},
                              im,
                              "  CF"))
                              ,A2($Graphics$Element.spacer,
                              A2($Basics.max,300,_v4._0),
                              100)
                              ,$Graphics$Element.height(160)(A4($Graphics$Element.container,
                              _v4._0,
                              titleHeight,
                              $Graphics$Element.midTop,
                              $Website$Blog$Formatting.formatTitleText(t)))
                              ,A4($Graphics$Element.container,
                              _v4._0,
                              bodyHeight,
                              $Graphics$Element.midTop,
                              A2($Graphics$Element.width,
                              A2($Basics.min,550,_v4._0),
                              postBody))
                              ,A2($Graphics$Element.spacer,
                              A2($Basics.max,300,_v4._0),
                              30)]));
              }();}
         _E.Case($moduleName,
         "between lines 21 and 28");
      }();
   });
   _elm.Website.Blog.Skeleton.values = {_op: _op
                                       ,titlebar: titlebar
                                       ,generatePost: generatePost
                                       ,generateImagefulPost: generateImagefulPost};
   return _elm.Website.Blog.Skeleton.values;
};Elm.Website = Elm.Website || {};
Elm.Website.Blog = Elm.Website.Blog || {};
Elm.Website.Blog.Formatting = Elm.Website.Blog.Formatting || {};
Elm.Website.Blog.Formatting.make = function (_elm) {
   "use strict";
   _elm.Website = _elm.Website || {};
   _elm.Website.Blog = _elm.Website.Blog || {};
   _elm.Website.Blog.Formatting = _elm.Website.Blog.Formatting || {};
   if (_elm.Website.Blog.Formatting.values)
   return _elm.Website.Blog.Formatting.values;
   var _op = {},
   _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Website.Blog.Formatting",
   $Basics = Elm.Basics.make(_elm),
   $Color = Elm.Color.make(_elm),
   $Graphics$Collage = Elm.Graphics.Collage.make(_elm),
   $Graphics$Element = Elm.Graphics.Element.make(_elm),
   $Text = Elm.Text.make(_elm);
   var formatFunctionText = function (s) {
      return $Text.justified($Text.height(36)($Text.typeface(_L.fromArray(["Computer Modern Roman"]))($Text.toText(s))));
   };
   var formatTitleText = function (s) {
      return $Text.justified($Text.color(A3($Color.rgb,
      94,
      94,
      93))($Text.height(36)($Text.typeface(_L.fromArray(["Helvetica-Bold"]))($Text.toText(s)))));
   };
   var title = function (t) {
      return $Graphics$Element.layers(_L.fromArray([A3($Graphics$Collage.collage,
                                                   100,
                                                   50,
                                                   _L.fromArray([$Graphics$Collage.move({ctor: "_Tuple2"
                                                                                        ,_0: -20
                                                                                        ,_1: 0})(A2($Graphics$Collage.filled,
                                                   A3($Color.rgb,34,48,54),
                                                   $Graphics$Collage.circle(24)))]))
                                                   ,A2($Graphics$Element.flow,
                                                   $Graphics$Element.down,
                                                   _L.fromArray([A2($Graphics$Element.spacer,
                                                                0,
                                                                16)
                                                                ,$Graphics$Element.link("http://λπω.com")($Text.justified($Text.color(A3($Color.rgb,
                                                                132,
                                                                151,
                                                                161))($Text.height(24)($Text.typeface(_L.fromArray(["Helvetica-Bold"]))($Text.toText(t))))))]))]));
   };
   var formatImagefulTitle = F3(function (_v0,
   t,
   im) {
      return function () {
         switch (_v0.ctor)
         {case "_Tuple2":
            return A2($Graphics$Element.flow,
              $Graphics$Element.outward,
              _L.fromArray([A3($Graphics$Element.fittedImage,
                           _v0._0,
                           _v0._1,
                           im)
                           ,A4($Graphics$Element.container,
                           100,
                           _v0._1,
                           A2($Graphics$Element.topLeftAt,
                           $Graphics$Element.absolute(10),
                           $Graphics$Element.absolute(4)),
                           title(t))]));}
         _E.Case($moduleName,
         "between lines 18 and 20");
      }();
   });
   _elm.Website.Blog.Formatting.values = {_op: _op
                                         ,title: title
                                         ,formatImagefulTitle: formatImagefulTitle
                                         ,formatTitleText: formatTitleText
                                         ,formatFunctionText: formatFunctionText};
   return _elm.Website.Blog.Formatting.values;
};</script></head><body><script type="text/javascript">Elm.fullscreen(Elm.Main)</script><noscript></noscript></body></html>